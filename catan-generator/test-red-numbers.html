<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <title>Kırmızı Sayılar Testi</title>
  <style>
    body { font-family: sans-serif; padding: 20px; background: #1a1a1a; color: #fff; }
    .result { margin: 10px 0; padding: 10px; border-radius: 4px; }
    .pass { background: #22c55e; color: #000; }
    .fail { background: #ef4444; }
    button { padding: 10px 20px; font-size: 16px; cursor: pointer; }
  </style>
</head>
<body>
  <h1>Kırmızı Sayılar (6 ve 8) Test</h1>
  <button onclick="runTest()">Testi Çalıştır</button>
  <div id="results"></div>

  <script src="app.js"></script>
  <script>
    function runTest() {
      const resultsDiv = document.getElementById('results');
      resultsDiv.innerHTML = '<p>Test çalışıyor...</p>';

      const testSeeds = ['test1', 'test2', 'test3', 'catan', '12345', 'ahmet', 'mehmet'];
      const results = [];

      for (const seed of testSeeds) {
        const options = {
          redCanTouch: false, // Classic: kırmızı sayılar yan yana gelemez
          twoTwelveCanTouch: true,
          sameNumbersCanTouch: true,
          sameResourceCanTouch: false,
          sameResourceSameNumber: false,
        };

        const board = generateBoardWithRules(seed, options);

        // Komşulukları kontrol et
        const coords = baseAxialCoords();
        const neighMap = buildNeighborMap(coords);

        let hasRedViolation = false;
        for (let i = 0; i < board.length; i++) {
          const tile = board[i];
          if (tile.number === 6 || tile.number === 8) {
            const coordKey = axialToKey(tile.q, tile.r);
            const neighs = neighMap.get(coordKey) || [];

            for (const nk of neighs) {
              const neighTile = board.find(t => axialToKey(t.q, t.r) === nk);
              if (neighTile && (neighTile.number === 6 || neighTile.number === 8)) {
                hasRedViolation = true;
                results.push({
                  seed,
                  pass: false,
                  message: `Seed "${seed}": 6/8 yan yana geldi! (${tile.number} ile ${neighTile.number})`
                });
                break;
              }
            }
            if (hasRedViolation) break;
          }
        }

        if (!hasRedViolation) {
          results.push({
            seed,
            pass: true,
            message: `Seed "${seed}": ✓ Kırmızı sayılar yan yana gelmedi`
          });
        }
      }

      // Sonuçları göster
      let html = '<h2>Test Sonuçları</h2>';
      for (const result of results) {
        html += `<div class="result ${result.pass ? 'pass' : 'fail'}">${result.message}</div>`;
      }

      const passCount = results.filter(r => r.pass).length;
      html += `<h3>Toplam: ${passCount}/${results.length} test geçti</h3>`;

      resultsDiv.innerHTML = html;
    }
  </script>
</body>
</html>

